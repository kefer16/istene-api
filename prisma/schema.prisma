// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

model Api_envio {
  api_envio_id   String   @id @default(uuid())
  codigo_envio   String   @unique
  tipo_peticion  String   @db.VarChar(10)
  url            String   @db.VarChar(150)
  parametros     String   @db.VarChar(max)
  llave          String   @db.VarChar(max)
  cabeceras      String   @db.VarChar(max)
  tipo_contenido String   @db.VarChar(max)
  cuerpo         String   @db.VarChar(max)
  respuesta      String   @db.VarChar(max)
  agente         String   @db.VarChar(150)
  fecha_creacion DateTime @db.DateTime
  estatus        Int      @db.Int
}

model Error {
  error_id       String   @id @default(uuid())
  codigo         String   @db.VarChar(10)
  linea          Int      @db.Int
  objeto         String   @db.VarChar(max)
  mensaje        String   @db.VarChar(max)
  servidor       String   @db.VarChar(150)
  fecha_registro DateTime @db.DateTime
  codigo_envio   String   @unique
}

model Usuario {
  usuario_id       String      @id @default(uuid())
  dni              String      @db.VarChar(8)
  nombre           String      @db.VarChar(150)
  apellido_paterno String      @db.VarChar(150)
  apellido_materno String      @db.VarChar(150)
  correo           String      @unique @db.VarChar(150)
  usuario          String      @unique @db.VarChar(150)
  contrasenia      String?     @db.VarChar(150)
  foto             String      @db.VarChar(max)
  direccion        String      @unique @db.VarChar(500)
  telefono         String      @db.VarChar(30)
  fecha_registro   DateTime    @db.DateTime
  activo           Boolean     @db.Bit
  fk_privilegio    String      @unique
  cls_privilegio   Privilegio  @relation(fields: [fk_privilegio], references: [privilegio_id])
  lst_candidatos   Candidato[]
}

model Privilegio {
  privilegio_id  String    @id @default(uuid())
  nombre         String    @unique @db.VarChar(50)
  activo         Boolean   @db.Bit
  abreviatura    String    @unique @db.VarChar(3)
  fecha_registro DateTime  @db.DateTime
  lst_usuario    Usuario[]
}

model Operador {
  operador_id    String      @id @default(uuid())
  nombre         String      @db.VarChar(15)
  activo         Boolean     @db.Bit
  fecha_registro DateTime    @db.DateTime
  lst_Operador   Candidato[]
}

model Candidato {
  candidato_id     String   @id @default(uuid())
  dni              String   @unique @db.VarChar(8)
  nombre           String   @db.VarChar(150)
  apellido_paterno String   @db.VarChar(150)
  apellido_materno String   @db.VarChar(150)
  direccion        String   @db.VarChar(300)
  telefono         String   @db.VarChar(9)
  observacion      String   @db.VarChar(500)
  activo           Boolean  @db.Bit
  fecha_registro   DateTime @db.DateTime
  fk_operador      String   @unique
  fk_usuario       String   @unique
  cls_usuario      Usuario  @relation(fields: [fk_usuario], references: [usuario_id])
  cls_operador     Operador @relation(fields: [fk_operador], references: [operador_id])
}
